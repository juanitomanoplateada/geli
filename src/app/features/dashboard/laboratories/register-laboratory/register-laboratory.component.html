<div class="register-container">
  <h1>Registro de Laboratorio</h1>
  <p class="subtitle">Ingrese los datos del nuevo laboratorio.</p>

  <form [formGroup]="labForm" (ngSubmit)="submitForm()">
    <!-- Nombre del Laboratorio -->
    <div class="form-group">
      <label for="labName">Nombre del Laboratorio</label>
      <input
        id="labName"
        type="text"
        formControlName="labName"
        class="form-control"
        appUppercase
        placeholder="Ej: Laboratorio de Física"
      />
      <div
        *ngIf="
          labForm.get('labName')?.invalid && labForm.get('labName')?.touched
        "
        class="error-message"
      >
        El nombre es obligatorio
      </div>
    </div>

    <!-- Descripción -->
    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control auto-expand"
        rows="1"
        appUppercase
        placeholder="Describa brevemente el laboratorio"
        (input)="autoResize($event)"
      ></textarea>
      <div
        *ngIf="
          labForm.get('description')?.invalid &&
          labForm.get('description')?.touched
        "
        class="error-message"
      >
        La descripción es obligatoria
      </div>
    </div>

    <!-- Lugar (Dropdown Reutilizable) -->
    <div class="form-group">
      <label for="location">Lugar</label>
      <app-dropdown-search
        [options]="locationOptions"
        [selectedValue]="selectedLocation"
        (select)="onSelectLocation($event)"
        placeholder="Seleccione un lugar"
      ></app-dropdown-search>
      <div
        *ngIf="
          labForm.get('locationName')?.invalid &&
          labForm.get('locationName')?.touched
        "
        class="error-message"
      >
        Debe seleccionar un lugar
      </div>
    </div>

    <!-- Disponibilidad -->
    <div class="form-group">
      <label for="availability">¿Disponible?</label>
      <select
        id="availability"
        formControlName="availability"
        class="form-control"
      >
        <option [value]="true">Sí</option>
        <option [value]="false">No</option>
      </select>
    </div>

    <!-- Botones -->
    <div class="button-group">
      <button type="button" class="btn cancel-btn" (click)="resetForm()">
        Cancelar
      </button>
      <button type="submit" class="btn submit-btn" [disabled]="!labForm.valid">
        Registrar Laboratorio
      </button>
    </div>

    <!-- Modal Reutilizable -->
    <app-confirm-modal
      [title]="'Confirmar Registro'"
      [show]="showConfirmationModal"
      [confirmLabel]="'Confirmar'"
      [cancelLabel]="'Cancelar'"
      (confirm)="confirmSubmit()"
      (cancel)="cancelConfirmation()"
    >
      <p>Por favor confirme la información antes de registrar:</p>
      <ul class="summary-list">
        <li><strong>Nombre:</strong> {{ labForm.value.labName }}</li>
        <li><strong>Descripción:</strong> {{ labForm.value.description }}</li>
        <li><strong>Lugar:</strong> {{ labForm.value.locationName }}</li>
        <li><strong>Disponible:</strong> {{ availabilityText }}</li>
      </ul>
    </app-confirm-modal>
  </form>
</div>
