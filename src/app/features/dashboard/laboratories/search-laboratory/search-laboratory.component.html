<div class="search-container">
  <app-search-advanced
    [searchQuery]="searchQuery"
    [filters]="filters"
    [isLoading]="isLoading"
    [showAdvancedSearch]="showAdvancedSearch"
    [fieldsConfig]="fieldsConfig"
    [availableFilterKeys]="availableFilterKeys"
    [activeFilterKeys]="activeFilterKeys"
    (searchQueryChange)="searchQuery = $event"
    (filtersChange)="filters = $event; performSearch()"
    (activeFilterKeysChange)="activeFilterKeys = $event"
    (triggerSearch)="performSearch()"
    (clearFilters)="resetSearch()"
    (toggleAdvanced)="toggleFilters()"
  ></app-search-advanced>

  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Buscando laboratorios...</p>
  </div>

  <app-results-table
    *ngIf="!isLoading && laboratories.length > 0"
    [columns]="columns"
    [data]="laboratories"
    [actionButtons]="actionButtons"
    [sortEnabled]="true"
  ></app-results-table>

  <div *ngIf="!isLoading && laboratories.length === 0" class="no-results">
    <p>{{ buildNoResultsMessage() }}</p>
    <button (click)="resetSearch()" class="try-again-btn">
      Limpiar b√∫squeda
    </button>
  </div>
</div>
